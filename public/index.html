<!DOCTYPE html>
<html>
<body>
	<canvas id="canvas" width="600" height="600"></canvas>
	<script>
		const canvas = document.getElementById("canvas");
		const ctx = canvas.getContext("2d");

		class Ball {
			constructor() {
				this.x = 300;
				this.y = 50;
				this.radius = 10;
				this.dx = 0; 
				this.dy = 0;
				this.gravity = 0.2;
				this.damping = 0.3;
			}

			update() {
				this.dy += this.gravity;
				this.x += this.dx;
				this.y += this.dy;
				
				// Floor collision
				if(this.y + this.radius > canvas.height){
					this.y = canvas.height - this.radius;
					this.dy *= -this.damping;
				}
			}

			draw() {
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
				ctx.fillStyle = 'blue';
				ctx.fill();
				ctx.closePath();
			}

			checkCollision(obstacle) {
				if(this.x + this.radius > obstacle.x &&
					this.x - this.radius < obstacle.x + obstacle.width &&
					this.y + this.radius > obstacle.y &&
					this.y - this.radius < obstacle.y + obstacle.height){
				
					this.y = obstacle.y - ball.radius;	
					this.dy *= -this.damping;

					if(Math.random() <= 0.5){
						this.x -= obstacle.width - this.radius - 5;
					}else{
						this.x += obstacle.width + this.radius + 5;
					}
					
				}	
			}
		}

		const ball = new Ball();
		const obstacle = {
			x: 300,
			y: 400,
			width: 5, 
			height: 20
		}		

		function animate() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			// draw obstacles
			ctx.fillStyle = 'red';
			ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);

			// call to ball physics
			ball.update();
			ball.checkCollision(obstacle);

			ball.draw();
			requestAnimationFrame(animate);
		}

		animate();
	</script>
</body>
</html>
